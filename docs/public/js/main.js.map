{
"version":3,
"file":"main.js",
"sourceRoot":"file:///",
"sources":["/Users/matthijs/Documents/workingdir/haxe/hxskeletor-sheet/src/Main.hx","/Users/matthijs/Documents/workingdir/haxe/hxskeletor-sheet/src/model/constants/App.hx"],
"sourcesContent":["package;\n\nimport js.Browser;\nimport js.Browser.*;\nimport js.html.*;\nimport js.html.Storage;\n\nimport model.constants.App;\n\nimport vue.Vue;\nimport js.Tabletop;\n\n/**\n * @author Matthijs Kamstra aka [mck]\n * MIT\n */\nclass Main {\n\n\tvar publicSpreadsheetUrl = 'https://docs.google.com/spreadsheets/d/1KhcMZv01CfiAvCPhL8nVTXEJ2oRcLgSlj5UNX40jTsM/edit?usp=sharing';\n\tvar vm:Vue;\n\n\t// content array\n\tvar contentArray : Array<{}> = [];\n\n\t// storage\n\tvar hasStorage : Bool = false;\n\tvar storageName = 'skeletor';\n\n\tpublic var storage  ( get_storage  , set_storage  ) : String;\n\tprivate var _storage  : String = null;\n\n\tfunction get_storage  () : String {\n\t\tif ( window.localStorage.getItem(storageName) != null){\n\t\t\t_storage = window.localStorage.getItem(storageName);\n\t\t\tcontentArray = haxe.Json.parse(_storage).data;\n\t\t\thasStorage = true;\n\t\t}\n\t\treturn _storage ;\n\t}\n\tfunction set_storage (value : String) : String {\n\t\tvar obj = {\n\t\t\tdate: Date.now(),\n\t\t\tdata: value\n\t\t}\n\t\twindow.localStorage.setItem(storageName, haxe.Json.stringify(obj));\n\t\tcontentArray = haxe.Json.parse(haxe.Json.stringify(value));\n\t\thasStorage = true;\n\t\treturn _storage  = value;\n\t}\n\n\n\tpublic function new () {\n\t\tdocument.addEventListener(\"DOMContentLoaded\", function(event) {\n\t\t\tconsole.log('Dom ready :: build: ${App.BUILD} ');\n\n\t\t\t/**\n\t\t\t *  first check if we visited the site before, then use that data first.\n\t\t\t *  then update anyway, just to show the latest data\n\t\t\t */\n\n\t\t\t// check for localStorage data\n\t\t\tif( storage != null ) trace('hasStorage : ${hasStorage}');\n\n\t\t\tinitHomepage();\n\t\t\tinitTabletop();\n\t\t});\n\t}\n\n\tfunction initHomepage (){\n\t\tvm = new Vue({\n\t\t\tel: '#app',\n\t\t\tdata: {\n\t\t\t\tshowloading: !hasStorage,\n\t\t\t\tsheet: contentArray,\n\t\t\t\tmessage: 'Content from this page from google spreadsheet and vue.js'\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction initTabletop(){\n\t\tTabletop.init(\n\t\t\t{\n\t\t\t\tkey: publicSpreadsheetUrl,\n\t\t\t\tcallback: showInfo,\n\t\t\t\tsimpleSheet: true\n\t\t\t}\n\t\t);\n\t}\n\n\tfunction showInfo(data, tabletop) {\n\t\t// Browser.alert('Successfully updated!');\n\t\tshowSnackbar('Successfully updated!');\n\t\t// console.log(data);\n\t\tvm.showloading = false;\n\t\tvm.sheet = data;\n\t\tstorage = data;\n\t}\n\n\n\t/**\n\t *  @param isDark -\n\t */\n\tfunction showLoading(isLoading:Bool,isDark:Bool = false) {\n\t\t// Get the loading DIV\n\t\tvar x = document.getElementById(\"loading\");\n\n\t\t// if no #loading exists, create it\n\t\tif(x == null){\n\t\t\tvar div = document.createDivElement();\n\t\t\tdiv.id = 'loading';\n\t\t\t// div.innerHTML = '<i class=\"fa fa-refresh fa-spin fa-3x fa-fw\"></i><span class=\"sr-only\">Loading...</span>';\n\t\t\tdiv.innerHTML = '<i class=\"fas fa-sync-alt fa-spin fa-3x\"></i><span class=\"sr-only\">Loading...</span>';\n\t\t\t// div.innerHTML = '<i class=\"fas fa-spinner fa-pulse\"></i>';\n\t\t\tdocument.body.appendChild(div);\n\t\t\tx = div;\n\t\t}\n\n\t\tif(isLoading){\n\t\t\t// Add the \"show\" class to DIV\n\t\t\tx.className = \"show\";\n\t\t} else {\n\t\t\tx.className = \"hide\";\n\t\t}\n\t}\n\n\tfunction showSnackbar(msg:String) {\n\t\t// Get the snackbar DIV\n\t\tvar x = document.getElementById(\"snackbar\");\n\n\t\t// if no #snackbar exists, create it\n\t\tif(x == null){\n\t\t\tvar div = document.createDivElement();\n\t\t\tdiv.id = 'snackbar';\n\t\t\tdocument.body.appendChild(div);\n\t\t\tx = div;\n\t\t}\n\n\t\t// set msg to snackbar\n\t\tx.innerText = msg;\n\n\t\t// Add the \"show\" class to DIV\n\t\tx.className = \"show\";\n\n\t\t// After 3 seconds, remove the show class from DIV\n\t\tuntyped setTimeout(function(){\n\t\t\tx.className = x.className.replace(\"show\", \"\");\n\t\t}, 3000);\n\n\t}\n\n\tstatic public function main () {\n\t\tvar app = new Main ();\n\t}\n}\n","package model.constants;\n\nimport haxe.macro.Context;\n\nclass App {\n\n\tpublic static inline var URL : String  = \"https://\";\n\n\tpublic static var BUILD : String = getBuildDate();\n\tpublic static var PROJECT_NAME : String = '[SkeletorSheet]';\n\n\tmacro public static function getBuildDate() {\n\t\tvar date = Date.now().toString();\n\t\treturn Context.makeExpr(date, Context.currentPos());\n\t}\n\n}"],
"names":[],
"mappings":";;WAmDQ,WAnCR;AAAA,CAakC,AAblC,gBAakC;CAHd,AAVpB,mBAUoB;CADK,AATzB,kBASyB;CAHO,AANhC,oBAMgC;CAJH,AAF7B,4BAE6B;CAiCrB;CACN,iCAA0B,mBAAoB,gBAAgB;AAAA,EAC7D,mBAAa,yBAAsB,4BAAU;EAQ7C,EAAI,yBAAW,MAAO;AAAA,eAAO,kBAAe;;EAE5C;EACA;;;YAsFY,WACb;AAAA,WAAU;;;cAxHX,WAAkC;AAAA,EACjC,EAAK,6BAA4B,qBAAgB,MAAK;AAAA,GACrD,gBAAW,4BAA4B;GACvC,oBAAe,WAAgB;GAC/B,kBAAa;;EAEd,OAAO;;eAER,gBAA+C;AAAA,EAC9C,UAAU,SACH,mBACA;EAEP,4BAA4B,iBAAa,eAAoB;EAC7D,oBAAe,WAAgB,eAAoB;EACnD,kBAAa;EACb,OAAO,gBAAY;;gBAqBpB,WACC;AAAA,YAAK,QAAQ,OACP,eACC,gBACQ,CAAC,yBACP,6BACG;;gBAKb,WACC;AAAA,gBACC,QACM,sCACK,yCACG;;YAKhB,wBAAkC;AAAA,EAEjC,kBAAc;EAEd,sBAAiB;EACjB,gBAAW;EACX,iBAAU;;gBA8BX,cAAkC;AAAA,EAEjC,QAAQ,+BAAwB;EAGhC,EAAG,MAAK,MAAK;AAAA,GACZ,UAAU;GACV,SAAU;GACV,iCAA0B;GAC1B,IAAI;;EAIL,cAAc;EAGd,cAAc;EAGN,WAAW,WAClB;AAAA,iBAAc,oBAAoB,OAAQ;IACxC;;;;;;4BC1I+B;;;;"
}